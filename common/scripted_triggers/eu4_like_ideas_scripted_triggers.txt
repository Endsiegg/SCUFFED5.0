has_selected_any_idea_group = {
	any_of = {
		array = selected_idea_groups
		value = value_temp
		index = index_temp
		NOT = { check_variable = { value_temp = 0 } }
	}
}

can_select_any_idea_group = {
	OR = {
		is_ai = no
		AND = {
			is_ai = yes
			NOT = { has_global_flag = eu4_like_ideas_ai_disabled }
			OR = {
				AND = {
					NOT = { has_global_flag = eu4_like_ideas_ai_only_majors }
					NOT = { has_global_flag = eu4_like_ideas_ai_only_minors }
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = yes
					has_global_flag = eu4_like_ideas_ai_only_majors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = no
					has_global_flag = eu4_like_ideas_ai_only_minors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
			}
		}
	}
	OR = {
		AND = {
			has_global_flag = eu4_like_ideas_test_flag
			is_in_array = { selected_idea_groups = 0 }
		}
		AND = {
			check_variable = { selected_idea_groups^0 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_1.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { selected_idea_groups^1 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_2.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			check_variable = { selected_idea_groups^2 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_3.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			check_variable = { selected_idea_groups^3 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_4.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			check_variable = { selected_idea_groups^4 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_5.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			check_variable = { selected_idea_groups^5 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_6.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			check_variable = { selected_idea_groups^6 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_7.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			check_variable = { selected_idea_groups^7 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_8.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			check_variable = { selected_idea_groups^8 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_9.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			check_variable = { selected_idea_groups^9 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_10.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			check_variable = { selected_idea_groups^10 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_11.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			check_variable = { selected_idea_groups^11 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_12.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			check_variable = { selected_idea_groups^12 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_13.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			check_variable = { selected_idea_groups^13 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_14.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			check_variable = { selected_idea_groups^14 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_15.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			check_variable = { selected_idea_groups^15 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_16.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			check_variable = { selected_idea_groups^16 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_17.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			check_variable = { selected_idea_groups^17 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_18.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			check_variable = { selected_idea_groups^18 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_19.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			check_variable = { selected_idea_groups^19 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_20.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			check_variable = { selected_idea_groups^20 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_21.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			check_variable = { selected_idea_groups^21 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_22.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			check_variable = { selected_idea_groups^22 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_23.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			check_variable = { selected_idea_groups^23 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_24.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			check_variable = { selected_idea_groups^24 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_25.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			check_variable = { selected_idea_groups^25 = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_26.GetDateStringNoHour]"
			}
		}
	}
}

can_select_any_idea = {
	OR = {
		is_ai = no
		AND = {
			is_ai = yes
			NOT = { has_global_flag = eu4_like_ideas_ai_disabled }
			NOT = { AI_might_want_to_change_to_a_better_economy_law = yes }
			NOT = { AI_might_want_to_change_to_a_better_conscription_law = yes }
			OR = {
				AND = {
					NOT = { has_global_flag = eu4_like_ideas_ai_only_majors }
					NOT = { has_global_flag = eu4_like_ideas_ai_only_minors }
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = yes
					has_global_flag = eu4_like_ideas_ai_only_majors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = no
					has_global_flag = eu4_like_ideas_ai_only_minors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
			}
		}
	}
	has_political_power > idea_cost_var
	OR = {
		AND = {
			NOT = { check_variable = { selected_idea_groups^0 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^0]"
			}
		}
		AND = {
			NOT = { check_variable = { selected_idea_groups^1 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^1]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			NOT = { check_variable = { selected_idea_groups^2 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^2]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			NOT = { check_variable = { selected_idea_groups^3 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^3]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			NOT = { check_variable = { selected_idea_groups^4 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^4]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			NOT = { check_variable = { selected_idea_groups^5 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^5]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			NOT = { check_variable = { selected_idea_groups^6 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^6]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			NOT = { check_variable = { selected_idea_groups^7 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^7]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			NOT = { check_variable = { selected_idea_groups^8 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^8]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			NOT = { check_variable = { selected_idea_groups^9 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^9]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			NOT = { check_variable = { selected_idea_groups^10 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^10]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			NOT = { check_variable = { selected_idea_groups^11 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^11]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			NOT = { check_variable = { selected_idea_groups^12 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^12]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			NOT = { check_variable = { selected_idea_groups^13 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^13]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			NOT = { check_variable = { selected_idea_groups^14 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^14]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			NOT = { check_variable = { selected_idea_groups^15 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^15]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			NOT = { check_variable = { selected_idea_groups^16 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^16]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			NOT = { check_variable = { selected_idea_groups^17 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^17]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			NOT = { check_variable = { selected_idea_groups^18 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^18]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			NOT = { check_variable = { selected_idea_groups^19 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^19]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			NOT = { check_variable = { selected_idea_groups^20 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^20]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			NOT = { check_variable = { selected_idea_groups^21 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^21]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			NOT = { check_variable = { selected_idea_groups^22 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^22]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			NOT = { check_variable = { selected_idea_groups^23 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^23]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			NOT = { check_variable = { selected_idea_groups^24 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^24]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			NOT = { check_variable = { selected_idea_groups^25 = 0 } }
			meta_trigger = {
				text = {
					check_variable = { completed_ideas_of_group_[GROUP] < 7 }
				}
				GROUP = "[?selected_idea_groups^25]"
			}
		}
	}
}

can_change_national_idea_group = {
	OR = {
		is_ai = no
		AND = {
			is_ai = yes
			NOT = { has_global_flag = eu4_like_ideas_ai_disabled }
			OR = {
				AND = {
					NOT = { has_global_flag = eu4_like_ideas_ai_only_majors }
					NOT = { has_global_flag = eu4_like_ideas_ai_only_minors }
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = yes
					has_global_flag = eu4_like_ideas_ai_only_majors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
				AND = {
					is_major = no
					has_global_flag = eu4_like_ideas_ai_only_minors
					OR = {
						NOT = { has_global_flag = eu4_like_ideas_ai_idea_usage_delayed }
						AND = {
							has_global_flag = eu4_like_ideas_ai_idea_usage_delayed
							meta_trigger = {
								text = {
									date > [DATE]
								}
								DATE = "[?global.eu4_like_ideas_AI_idea_usage_delay.GetDateStringNoHour]"
							}
						}
					}
				}
			}
		}
	}
	calculate_right_national_ideas_id = yes
	NOT = { check_variable = { national_ideas_id = national_ideas_id_other_context } }
}

calculate_right_national_ideas_id = {
	set_temp_variable = { national_ideas_id_other_context = 1000 }
	# Formables
	if = {
		limit = {
			OR = {
				original_tag = MAN
				has_cosmetic_tag = CHI_QING_EMPIRE
				has_cosmetic_tag = QIN_formable
				AND = {
					has_start_date > 1910.4.30
					NOT = { has_start_date > 1933.1.1 }
					tag = QIN
				}
			}
		}
		set_temp_variable = { national_ideas_id_other_context = 16 }
	}
	else_if = {
		limit = {
			has_cosmetic_tag = GRE_MACEDONIAN_EMPIRE
		}
		set_temp_variable = { national_ideas_id_other_context = 17 }
	}
	else_if = {
		limit = {
			OR = {
				has_cosmetic_tag = OTT_UNIFIED
				AND = {
					original_tag = TUR
					has_start_date > 1910.4.30
					NOT = { has_start_date > 1933.1.1 }
				}
			}
		}
		set_temp_variable = { national_ideas_id_other_context = 20 }
	}
	else_if = {
		limit = {
			OR = {
				has_cosmetic_tag = HUN_EMPIRE
				AND = {
					has_start_date > 1910.4.30
					NOT = { has_start_date > 1933.1.1 }
					original_tag = AUH
				}
			}
		}
		set_temp_variable = { national_ideas_id_other_context = 21 }
	}
	# Countries
	else_if = {
		limit = {
			original_tag = GER
		}
		if = {
			limit = {
				has_government = neutrality
			}
			set_temp_variable = { national_ideas_id_other_context = 13 }
		}
		else = {
			set_temp_variable = { national_ideas_id_other_context = 1 }
		}
	}
	else_if = {
		limit = {
			original_tag = USA
		}
		set_temp_variable = { national_ideas_id_other_context = 2 }
	}
	else_if = {
		limit = {
			original_tag = ENG
		}
		set_temp_variable = { national_ideas_id_other_context = 3 }
	}
	else_if = {
		limit = {
			original_tag = ITA
		}
		set_temp_variable = { national_ideas_id_other_context = 4 }
	}
	else_if = {
		limit = {
			original_tag = SOV
		}
		if = {
			limit = {
				has_government = neutrality
			}
			set_temp_variable = { national_ideas_id_other_context = 27 }
		}
		else = {
			set_temp_variable = { national_ideas_id_other_context = 5 }
		}
	}
	else_if = {
		limit = {
			original_tag = JAP
		}
		set_temp_variable = { national_ideas_id_other_context = 6 }
	}
	else_if = {
		limit = {
			original_tag = FRA
		}
		set_temp_variable = { national_ideas_id_other_context = 7 }
	}
	else_if = {
		limit = {
			original_tag = CAN
		}
		set_temp_variable = { national_ideas_id_other_context = 8 }
	}
	else_if = {
		limit = {
			original_tag = PRC
		}
		set_temp_variable = { national_ideas_id_other_context = 9 }
	}
	else_if = {
		limit = {
			original_tag = CHI
		}
		set_temp_variable = { national_ideas_id_other_context = 10 }
	}
	else_if = {
		limit = {
			OR = {
				original_tag = GXC
				original_tag = YUN
				original_tag = SHX
				original_tag = XSM
				original_tag = SIK
			}
		}
		set_temp_variable = { national_ideas_id_other_context = 11 }
	}
	else_if = {
		limit = {
			original_tag = POL
		}
		set_temp_variable = { national_ideas_id_other_context = 12 }
	}
	else_if = {
		limit = {
			original_tag = GRE
		}
		set_temp_variable = { national_ideas_id_other_context = 14 }
	}
	else_if = {
		limit = {
			original_tag = SPR
		}
		if = {
			limit = {
				OR = {
					tag = SPC
					has_government = communism
				}
			}
			set_temp_variable = { national_ideas_id_other_context = 26 }
		}
		else = {
			set_temp_variable = { national_ideas_id_other_context = 15 }
		}
	}
	else_if = {
		limit = {
			original_tag = ROM
		}
		set_temp_variable = { national_ideas_id_other_context = 18 }
	}
	else_if = {
		limit = {
			original_tag = TUR
		}
		set_temp_variable = { national_ideas_id_other_context = 19 }
	}
	else_if = {
		limit = {
			original_tag = POR
		}
		set_temp_variable = { national_ideas_id_other_context = 22 }
	}
	else_if = {
		limit = {
			original_tag = SWE
		}
		set_temp_variable = { national_ideas_id_other_context = 23 }
	}
	else_if = {
		limit = {
			original_tag = HOL
		}
		set_temp_variable = { national_ideas_id_other_context = 24 }
	}
	else_if = {
		limit = {
			original_tag = SAU
		}
		set_temp_variable = { national_ideas_id_other_context = 25 }
	}
	else_if = {
		limit = {
			original_tag = BEL
		}
		set_temp_variable = { national_ideas_id_other_context = 28 }
	}
	else_if = {
		limit = {
			original_tag = SWI
		}
		set_temp_variable = { national_ideas_id_other_context = 29 }
	}
	else_if = {
		limit = {
			original_tag = PER
		}
		set_temp_variable = { national_ideas_id_other_context = 30 }
	}
	else_if = {
		limit = {
			original_tag = HUN
		}
		set_temp_variable = { national_ideas_id_other_context = 31 }
	}
}

AI_might_want_to_spend_pp_on_something_else = {
	is_ai = yes
	OR = {
		AI_might_want_to_change_to_a_better_economy_law = yes
		AI_might_want_to_change_to_a_better_conscription_law = yes
		AND = {
			JAP_has_idea_JAP_intervene_in_china = yes
			any_enemy_country = {
				is_literally_china = yes
			}
		}
	}
}

AI_might_want_to_change_to_a_better_economy_law = {
	is_ai = yes
	set_temp_variable = { required_pp_temp = modifier@economy_cost_factor }
	add_to_temp_variable = { required_pp_temp = 1 }
	multiply_temp_variable = { required_pp_temp = 150 }
	add_to_temp_variable = { required_pp_temp = idea_cost_var }
	has_political_power < required_pp_temp
	OR = {
		AND = {
			NOT = { has_idea = low_economic_mobilisation }
			NOT = { has_idea = partial_economic_mobilisation }
			NOT = { has_idea = war_economy }
			NOT = { has_idea = tot_economic_mobilisation }
			# Trigger for Law:
			has_war_support > 0.15
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					has_completed_focus = USA_limited_intervention
					has_defensive_war = no
				}
				has_war_support > 0.3
				congress_high_support_trigger = yes
			}
			# AI reasons:
			has_war_support < 0.25
			OR = {
				NOT = { tag = ENG }
				has_war = yes
				date > 1937.6.1
			}
		}
		AND = {
			NOT = { has_idea = partial_economic_mobilisation }
			NOT = { has_idea = war_economy }
			NOT = { has_idea = tot_economic_mobilisation }
			# Trigger for Law:
			has_war_support > 0.25
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				OR = {
					has_completed_focus = HUN_secret_rearmament
					NOT = { has_idea = HUN_treaty_of_triannon }
				}
			}
			if = {
				limit = {
					has_completed_focus = USA_limited_intervention
					has_defensive_war = no
				}
				has_war_support > 0.5
				congress_high_support_trigger = yes
			}
			# AI reasons:
			## None
		}
		AND = {
			NOT = { has_idea = war_economy }
			NOT = { has_idea = tot_economic_mobilisation }
			# Trigger for Law:
			has_war_support > 0.5
			OR = {
				has_government = fascism
				has_government = communism
				AND = {
					has_war = yes
					any_enemy_country = {
						ic_ratio = {
							tag = ROOT
							ratio > 0.4
						}
					}
				}
			}
			# AI reasons:
			## None
		}
		AND = {
			NOT = { has_idea = tot_economic_mobilisation }
			# Trigger for Law:
			has_war = yes
			has_war_support > 0.8
			any_enemy_country = {
				ic_ratio = {
					tag = ROOT
					ratio > 0.5
				}
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					has_completed_focus = USA_limited_intervention
					has_defensive_war = no
				}
				has_war_support > 0.9
				congress_high_support_trigger = yes
			}
			# AI reasons:
			manpower_per_military_factory > 7000
			NOT = { has_idea = volunteer_only }
			NOT = { has_idea = limited_conscription }
			OR = {
				NOT = { tag = GER }
				has_tech = volkssturm
				has_war = no
				date > 1944.01.01
			}
			OR = {
				NOT = { tag = SOV }
				has_war = no
				NOT = {
					OR = {
						has_manpower < 2000000
						NOT = {
							OR = {
								has_idea = all_adults_serve
								has_idea = service_by_requirement
							}
						}
					}
				}
			}
		}
	}
}

AI_might_want_to_change_to_a_better_conscription_law = {
	is_ai = yes
	set_temp_variable = { required_pp_temp = modifier@mobilization_laws_cost_factor }
	add_to_temp_variable = { required_pp_temp = 1 }
	multiply_temp_variable = { required_pp_temp = 150 }
	add_to_temp_variable = { required_pp_temp = idea_cost_var }
	has_political_power < required_pp_temp
	OR = {
		AND = {
			NOT = { has_idea = volunteer_only }
			NOT = { has_idea = limited_conscription }
			NOT = { has_idea = extensive_conscription }
			NOT = { has_idea = service_by_requirement }
			NOT = { has_idea = all_adults_serve }
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			NOT = { has_idea = undisturbed_isolation }
			NOT = { has_idea = isolation }
			# AI reasons:
			has_idea = disarmed_nation
		}
		AND = {
			NOT = { has_idea = limited_conscription }
			NOT = { has_idea = extensive_conscription }
			NOT = { has_idea = service_by_requirement }
			NOT = { has_idea = all_adults_serve }
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			has_war_support > 0.1
			NOT = { has_idea = undisturbed_isolation }
			NOT = { has_idea = isolation }
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				has_completed_focus = CAN_commit_to_the_war
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					original_tag = ENG
					has_dlc = "Man the Guns"
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				NOT = { has_country_flag = ENG_cannot_increase_conscription_law }
			}
			# AI reasons:
			OR = {
				manpower_per_military_factory < 1000
				AND = {
					tag = ENG
					has_idea_with_trait = military_theorist
				}
			}
		}
		AND = {
			NOT = { has_idea = extensive_conscription }
			NOT = { has_idea = service_by_requirement }
			NOT = { has_idea = all_adults_serve }
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			OR = {
				has_government = fascism
				has_government = communism
				AND = {
					has_war = yes
					enemies_strength_ratio > 0.5
					#any_enemy_country = {
					#	strength_ratio = {
					#		tag = ROOT
					#		ratio > 0.5
					#	}
					#}
				}
			}
			has_war_support > 0.2
			#Special rules AST in TFV
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				has_completed_focus = CAN_commit_to_the_war
				has_completed_focus = CAN_if_day
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					original_tag = ENG
					has_dlc = "Man the Guns"
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				NOT = { has_country_flag = ENG_cannot_increase_conscription_law }
			}
			# AI reasons:
			OR = {
				manpower_per_military_factory < 800
				AND = {
					tag = CHI
					has_manpower < 200000
				}
			}
		}
		AND = {
			NOT = { has_idea = service_by_requirement }
			NOT = { has_idea = all_adults_serve }
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			OR = {
				has_government = fascism
				has_government = communism
				AND = {
					has_war = yes
					enemies_strength_ratio > 0.6
				}
			}
			OR = {
				has_war_support > 0.6
				surrender_progress > 0
			}
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				OR = {
					has_completed_focus = CAN_compromise_with_quebec
					has_completed_focus = CAN_forced_quebec_conscription
				}
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					original_tag = ENG
					has_dlc = "Man the Guns"
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				NOT = { has_country_flag = ENG_cannot_increase_conscription_law }
			}
			# AI reasons:
			OR = {
				tag = CHI
				tag = SOV
				NOT = { manpower_per_military_factory >  3000 }
			}
			OR = {
				manpower_per_military_factory < 700
				AND = {
					tag = CHI
					has_manpower < 200000
				}
				AND = {
					original_tag = GER
					has_manpower < 2000000
				}
				AND = {
					original_tag = SOV
					check_variable = { manpower_k < 3000 }
				}
			}
		}
		AND = {
			NOT = { has_idea = all_adults_serve }
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			has_war = yes
			OR = {
				has_war_support > 0.7
				surrender_progress > 0
			}
			enemies_strength_ratio > 0.75
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				OR = {
					has_completed_focus = CAN_compromise_with_quebec
					has_completed_focus = CAN_forced_quebec_conscription
				}
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					original_tag = ENG
					has_dlc = "Man the Guns"
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				NOT = { has_country_flag = ENG_cannot_increase_conscription_law }
			}
			# AI reasons:
			OR = {
				tag = CHI
				NOT = { manpower_per_military_factory > 5000 }
			}
			OR = {
				manpower_per_military_factory < 600
				AND = {
					tag = CHI
					has_manpower < 200000
				}
				AND = {
					original_tag = SOV
					date > 1943.1.1
					has_manpower < 2000000
				}
			}
		}
		AND = {
			NOT = { has_idea = scraping_the_barrel }
			# Trigger for Law:
			has_war = yes
			OR = {
				has_war_support > 0.85
				surrender_progress > 0.25
			}
			enemies_strength_ratio > 1
			if = {
				limit = {
					original_tag = AST
					has_dlc = "Together for Victory"
				}
				has_completed_focus = AST_citizen_military_forces
				has_completed_focus = AST_fight_work_or_perish
			}
			if = {
				limit = {
					original_tag = CAN
					has_dlc = "Together for Victory"
				}
				OR = {
					has_completed_focus = CAN_compromise_with_quebec
					has_completed_focus = CAN_forced_quebec_conscription
				}
			}
			if = {
				limit = {
					original_tag = RAJ
					has_dlc = "Together for Victory"
				}
				is_subject = no
			}
			if = {
				limit = {
					original_tag = HUN
					has_dlc = "Death or Dishonor"
				}
				NOT = { has_idea = HUN_treaty_of_triannon }
			}
			if = {
				limit = {
					original_tag = ENG
					has_dlc = "Man the Guns"
					has_completed_focus = ENG_concessions_to_the_trade_unions
				}
				NOT = { has_country_flag = ENG_cannot_increase_conscription_law }
			}
			# AI reasons:
			NOT = { manpower_per_military_factory > 5000 }
			manpower_per_military_factory < 500
		}
	}
}

AI_can_remove_any_idea_group = {
	is_ai = yes
	NOT = { has_global_flag = eu4_like_ideas_ai_disabled }
	OR = {
		AND = {
			NOT = { has_global_flag = eu4_like_ideas_ai_only_majors }
			NOT = { has_global_flag = eu4_like_ideas_ai_only_minors }
		}
		AND = {
			is_major = yes
			has_global_flag = eu4_like_ideas_ai_only_majors
		}
		AND = {
			is_major = no
			has_global_flag = eu4_like_ideas_ai_only_minors
		}
	}
	OR = {
		# Communist Ideas
		AND = {
			set_temp_variable = { idea_group_out_of_context = 4 }
			has_selected_idea_group = yes
			OR = {
				AND = {
					NOT = { has_government = communism }
					communism < 0.2
				}
				OR = {
					democratic > 0.5
				}
				OR = {
					fascism > 0.5
				}
				OR = {
					AND = {
						neutrality > 0.5
					}
				}
			}
		}
		# Democratic Ideas
		AND = {
			set_temp_variable = { idea_group_out_of_context = 5 }
			has_selected_idea_group = yes
			OR = {
				AND = {
					NOT = { has_government = democratic }
					democratic < 0.2
				}
				OR = {
					communism > 0.5
				}
				OR = {
					fascism > 0.5
				}
				OR = {
					AND = {
						neutrality > 0.5
					}
				}
			}
		}
		# Fascist Ideas
		AND = {
			set_temp_variable = { idea_group_out_of_context = 6 }
			has_selected_idea_group = yes
			OR = {
				AND = {
					NOT = { has_government = fascism }
					fascism < 0.2
				}
				OR = {
					communism > 0.5
				}
				OR = {
					democratic > 0.5
				}
				OR = {
					AND = {
						neutrality > 0.5
					}
				}
			}
		}
		# Monarchist Ideas
		AND = {
			set_temp_variable = { idea_group_out_of_context = 19 }
			has_selected_idea_group = yes
			OR = {
				AND = {
					NOT = { has_government = neutrality }
					neutrality < 0.2
				}
				OR = {
					communism > 0.5
				}
				OR = {
					democratic > 0.5
				}
				OR = {
					fascism > 0.5
				}
			}
		}
	}
}

can_remove_flags_for_available_dismissed_alerts = {
	OR = {
		AND = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_1 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_1
			NOT = { is_in_array = { eu4_like_ideas_alerts = 1 } }
			can_select_any_idea = yes
		}
		AND = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_2 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_2
			NOT = { is_in_array = { eu4_like_ideas_alerts = 2 } }
			can_select_any_idea_group = yes
		}
		AND = {
			NOT = { has_country_flag = disabled_eu4_like_ideas_alerts_3 }
			has_country_flag = temporarily_disabled_eu4_like_ideas_alerts_3
			NOT = { is_in_array = { eu4_like_ideas_alerts = 3 } }
			can_select_any_policy = yes
		}
	}
}

specific_idea_group_slot_is_unlocked = {
	OR = {
		has_global_flag = eu4_like_ideas_test_flag
		AND = {
			check_variable = { i = 0 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_1.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { i = 1 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_2.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			check_variable = { i = 2 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_3.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 2 }
			check_variable = { i = 3 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_4.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			check_variable = { i = 4 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_5.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 4 }
			check_variable = { i = 5 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_6.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			check_variable = { i = 6 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_7.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 6 }
			check_variable = { i = 7 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_8.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			check_variable = { i = 8 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_9.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 8 }
			check_variable = { i = 9 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_10.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			check_variable = { i = 10 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_11.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 10 }
			check_variable = { i = 11 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_12.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			check_variable = { i = 12 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_13.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 12 }
			check_variable = { i = 13 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_14.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			check_variable = { i = 14 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_15.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 14 }
			check_variable = { i = 15 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_16.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			check_variable = { i = 16 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_17.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 16 }
			check_variable = { i = 17 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_18.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			check_variable = { i = 18 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_19.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 18 }
			check_variable = { i = 19 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_20.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			check_variable = { i = 20 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_21.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 20 }
			check_variable = { i = 21 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_22.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			check_variable = { i = 22 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_23.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 22 }
			check_variable = { i = 23 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_24.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			check_variable = { i = 24 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_25.GetDateStringNoHour]"
			}
		}
		AND = {
			check_variable = { global.num_of_unlockable_idea_groups > 24 }
			check_variable = { i = 25 }
			meta_trigger = {
				text = {
					date > [DATE]
				}
				DATE = "[?global.unlock_date_for_idea_group_26.GetDateStringNoHour]"
			}
		}
	}
}

# usage:
## set_temp_variable = { idea_group_out_of_context = 1 }
## has_selected_idea_group = yes
has_selected_idea_group = {
	custom_trigger_tooltip = {
		tooltip = HAS_IDEA_GROUP_SELECTED
		is_in_array = { selected_idea_groups = idea_group_out_of_context }
	}
}

# usage:
## set_temp_variable = { idea_group_out_of_context = 1 }
## has_completed_idea_group = yes
has_completed_idea_group = {
	custom_trigger_tooltip = {
		tooltip = HAS_IDEA_GROUP_COMPLETED
		has_selected_idea_group = yes
		set_temp_variable = { required_num = global.required_ideas_for_policy_minus_1?6 }
		meta_trigger = {
			text = {
				check_variable = { completed_ideas_of_group_[GROUP] > required_num }
			}
			GROUP = "[?idea_group_out_of_context]"
		}
	}
}

calculate_total_num_of_ideas_trigger = {
	set_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_1 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_2 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_3 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_4 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_5 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_6 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_7 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_8 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_9 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_10 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_11 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_12 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_13 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_14 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_15 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_16 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_17 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_18 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_19 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_20 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_21 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_22 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_23 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_24 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_25 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_26 }
	add_to_temp_variable = { num_of_ideas_temp = completed_ideas_of_group_27 }
}